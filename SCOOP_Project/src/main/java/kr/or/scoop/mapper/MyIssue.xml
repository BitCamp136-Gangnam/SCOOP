<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.or.scoop.dao.MyIssueDao">
<insert id="writeMyissue" parameterType="kr.or.scoop.dto.MyIssue" >
insert into myissue (piseq,pfilename,pfilesize,pititle,picontent,pistart, piend, ispibook, email, pidate, mygfilename, mymention, myurl)
  values (PISEQ_MYISSUE_SEQ.NEXTVAL, #{pfilename,jdbcType=VARCHAR}, #{pfilesize,jdbcType=VARCHAR}, #{pititle}, #{picontent}, #{pistart,jdbcType=DATE}, #{piend,jdbcType=DATE}, 0, #{email,jdbcType=VARCHAR}, sysdate, #{mygfilename,jdbcType=VARCHAR}, #{mymention,jdbcType=VARCHAR}, #{myurl,jdbcType=VARCHAR})
</insert>
<select id="getMyissue" resultType="kr.or.scoop.dto.MyIssue">
	SELECT piseq, pititle, picontent, pidate, ispibook FROM myissue WHERE email = #{email, jdbcType=VARCHAR}
</select>
<select id="MyWriteIssueList" resultType="kr.or.scoop.dto.MyIssue">
select piseq,pititle,pidate from myissue where email = #{email}
</select>
<select id="MyWriteTiisueList" resultType="kr.or.scoop.dto.MyIssue">
select t.tseq,t.tititle,t.tidate,t.tiseq, t.isprocess,p.pname from tissue t join teampjt p on t.tseq = p.tseq where t.email = #{email}
</select>
<select id="myissueDetail" resultType="kr.or.scoop.dto.MyIssue">
	SELECT piseq, pititle, picontent, pidate, ispibook FROM myissue WHERE piseq = #{piseq, jdbcType=INTEGER}
</select>
<!-- 북마크 -->
<insert id="addBookMark">
	insert into bookmark(piseq, email) 
	values(#{param1}, #{param2})
</insert>
<delete id="delBookMark">
	delete from bookmark 
	where piseq=#{param1} and email=#{param2}
</delete>
<select id="getBookMark" resultType="kr.or.scoop.dto.BookMark">
	select nvl(b.piseq, 0) as piseq, nvl(b.tiseq, 0) as tiseq, b.email
	from bookmark b full outer join myissue m on b.piseq=m.piseq 
                	full outer join tissue t on b.tiseq=t.tiseq 
	where b.email = #{email}
</select>


</mapper>